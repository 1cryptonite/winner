"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const _ = require("lodash");
const assert = require("assert");
function initialize(library, settings) {
    const pino = require("pino");
    let defaults = {};
    try {
        require("pino-pretty");
        defaults.prettyPrint = {
            colorize: true,
            translateTime: "SYS:standard"
        };
    }
    catch (e) {
    }
    settings = _.cloneDeep(_.merge(defaults, settings));
    settings.level = settings.level || "info";
    library.provider = {
        setLevel: function (level) {
            assert(level, "level can not be empty");
            settings.level = level;
        },
        getLogger: function (name, options) {
            if (options.parent) {
                return options.parent.child({ name, level: settings.level });
            }
            return pino(_.defaults(Object.assign({}, settings), Object.assign({ name }, options)));
        }
    };
}
exports.initialize = initialize;
//# sourceMappingURL=pino.js.map